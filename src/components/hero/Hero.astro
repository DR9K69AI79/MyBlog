---
import { hero } from '@/config.json'
import { SocialList } from './SocialList'
import Highlight from '@/components/Highlight.astro'
import InteractiveProject from './InteractiveProject'
import { getCollection } from 'astro:content'

// 获取项目配置，检查是否有项目在主页显示
const yamlProjects = await getCollection('projects')
const hasHomepageProjects = yamlProjects.some((project) => project.data.showOnHomepage !== false)
---

<div class="lg:-mt-16 lg:h-dvh lg:min-h-[720px]">
  <div
    class="relative max-w-[1300px] mx-auto h-full px-4 grid lg:grid-cols-2 items-center justify-items-center"
  >
    <div class="mt-[120px] lg:mt-0 max-w-[590px]">
      <h1 class="text-3xl text-center lg:text-left text-balance">
        你好, 这里是 <Highlight class="font-bold">{hero.name}</Highlight>的博客🫡<br />{hero.bio}
      </h1>
      <div class="text-sm text-secondary mt-3 text-center lg:text-left">{hero.description}</div>
      <SocialList className="mt-[60px]" client:load />
    </div>
    <div class="mt-20 lg:mt-0">
      {
        (hasHomepageProjects || yamlProjects.length === 0) && (
          <InteractiveProject client:only="react" />
        )
      }
    </div>

    <div class="mt-10 lg:mt-0 lg:absolute inset-x-0 bottom-0 flex flex-col items-center">
      <p class="text-xs text-center text-balance text-secondary">
        {hero.yiyan}
      </p>
      <div class="mt-7 text-xl animate-bounce">
        <i class="iconfont icon-down"></i>
      </div>
    </div>
  </div>
</div>
